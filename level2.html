<!-- ä¿®æ­£ç‰ˆ level2.html -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¤§è‡ªç„¶æ’¿åƒåœ¾éŠæˆ²ãƒ»æŒ‘æˆ°ç‰ˆ</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; overflow: hidden;
    }
    body {
      background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
      background-size: cover;
      font-family: "Microsoft JhengHei", sans-serif;
      color: #fff;
      text-align: center;
    }
    #game-area {
      position: relative;
      width: 100%;
      height: 100%;
    }
    #intro {
      background: rgba(0,0,0,0.6);
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      padding: 30px;
      border-radius: 10px;
    }
    #start-btn {
      padding: 12px 30px; font-size: 20px; cursor: pointer;
    }
    #score, #timer {
      position: absolute;
      top: 20px;
      font-size: 24px;
      background: rgba(0,0,0,0.5);
      padding: 10px 20px;
      border-radius: 8px;
    }
    #score { left: 20px; }
    #timer { right: 20px; }
    .trash {
      position: absolute;
      width: 50px;
      height: 50px;
      cursor: pointer;
      user-select: none;
      font-size: 40px;
    }
    #result {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      background: rgba(0,0,0,0.7);
      padding: 30px;
      border-radius: 10px;
      z-index: 999;
    }
    #result a button, #result button {
      margin-top: 20px;
      padding: 10px 25px;
      font-size: 20px;
      background-color: #32a852;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #result a button:hover, #result button:hover {
      background-color: #2b8642;
    }
  </style>
</head>
<body>
  <div id="game-area">
    <div id="intro">
      <h1>ğŸŒ² å¤§è‡ªç„¶æ’¿åƒåœ¾æŒ‘æˆ°ç‰ˆ ğŸ—‘ï¸</h1>
      <p>åœ¨ç¾éº—çš„å¤§è‡ªç„¶è£¡ï¼Œé»æ“Šç•«é¢ä¸Šçš„<strong>çœŸåƒåœ¾</strong>ï¼Œå°å¿ƒé¿é–‹å‡åƒåœ¾ï¼</p>
      <p>ğŸ¯ <strong>éŠæˆ²è¦å‰‡ï¼š</strong></p>
      <ul style="text-align: left;">
        <li>â± <strong>æ™‚é–“é™åˆ¶</strong>ï¼š20 ç§’</li>
        <li>âœ… <strong>ç›®æ¨™</strong>ï¼š20 ç§’å…§è‡³å°‘æ’¿åˆ° 25 å€‹çœŸåƒåœ¾ã€‚</li>
        <li>âŒ <strong>å‡åƒåœ¾</strong>ï¼ˆğŸ‚ï¼‰é»åˆ°æœƒæ‰£ 2 åˆ†ï¼Œè«‹å°å¿ƒï¼</li>
        <li>ğŸ“Š <strong>å¾—åˆ†æ–¹å¼</strong>ï¼šæ¯æ’¿åˆ°ä¸€å€‹çœŸåƒåœ¾åŠ  1 åˆ†ã€‚</li>
        <li>ğŸ‰ <strong>æŒ‘æˆ°æˆåŠŸ</strong>ï¼šå®Œæˆå¾Œåˆ†æ•¸é” 25 åˆ†æˆ–æ›´å¤šæ‰ç®—æˆåŠŸï¼</li>
      </ul>
      <button id="start-btn" onclick="startGame()">é–‹å§‹æŒ‘æˆ°</button>
    </div>
    <div id="score" style="display:none;">åˆ†æ•¸ï¼š0</div>
    <div id="timer" style="display:none;">æ™‚é–“ï¼š20</div>
  </div>

  <script>
    const gameArea = document.getElementById("game-area");
    const scoreBoard = document.getElementById("score");
    const timerBoard = document.getElementById("timer");
    let score = 0;
    const winScore = 25;
    let spawnInterval;
    let gameEnded = false;
    let timeLeft = 20;
    let countdownInterval;

    function startGame() {
      // éš±è— intro
      document.getElementById("intro").style.display = "none";
      scoreBoard.style.display = "block";
      timerBoard.style.display = "block";
      score = 0;
      timeLeft = 20;
      gameEnded = false;
      scoreBoard.innerText = `åˆ†æ•¸ï¼š${score}`;
      timerBoard.innerText = `æ™‚é–“ï¼š${timeLeft}`;

      // ç§»é™¤èˆŠçš„ result ç•«é¢ï¼ˆé—œéµä¿®æ­£ï¼‰
      const oldResult = document.getElementById("result");
      if (oldResult) oldResult.remove();

      spawnInterval = setInterval(spawnTrash, 500);
      countdownInterval = setInterval(() => {
        timeLeft--;
        timerBoard.innerText = `æ™‚é–“ï¼š${timeLeft}`;
        if (timeLeft <= 0) endGame();
      }, 1000);
    }

    function spawnTrash() {
      if (gameEnded) return;
      const count = Math.floor(Math.random() * 4) + 1;
      for (let i = 0; i < count; i++) {
        const trash = document.createElement("div");
        trash.classList.add("trash");
        const isReal = Math.random() < 0.6;
        trash.dataset.real = isReal ? "true" : "false";
        trash.innerText = isReal ? "ğŸ—‘ï¸" : "ğŸ‚";
        const x = Math.random() * (window.innerWidth - 60);
        const y = Math.random() * (window.innerHeight - 60);
        trash.style.left = `${x}px`;
        trash.style.top = `${y}px`;
        trash.onclick = () => {
          if (!trash.parentNode) return;
          trash.remove();
          score += (trash.dataset.real === "true") ? 1 : -2;
          if (score < 0) score = 0;
          scoreBoard.innerText = `åˆ†æ•¸ï¼š${score}`;
        };
        gameArea.appendChild(trash);
        trash.removeTimeout = setTimeout(() => {
          if (trash.parentNode) trash.remove();
        }, 2000);
      }
    }

    function endGame() {
      gameEnded = true;
      clearInterval(spawnInterval);
      clearInterval(countdownInterval);
      document.querySelectorAll('.trash').forEach(t => {
        clearTimeout(t.removeTimeout);
        t.remove();
      });

      const result = document.createElement("div");
      result.id = "result";
      if (score >= winScore) {
        result.innerHTML = `
          <h2>ğŸ‰ å¤ªå²å®³äº†ï¼ä½ é€šéäº†çµ‚æ¥µæŒ‘æˆ°ï¼</h2>
          <p>ä½ æˆåŠŸæ’¿äº† ${score} å€‹çœŸåƒåœ¾ï¼</p>
          <a href="level3.html"><button aria-label="ç¹¼çºŒé—–é—œ">ç¹¼çºŒé—–é—œ</button></a>
        `;
      } else {
        result.innerHTML = `
          <h2>ğŸ˜¢ å¾ˆéºæ†¾ï¼ŒæŒ‘æˆ°å¤±æ•—...</h2>
          <p>ä½ åªæ’¿äº† ${score} å€‹çœŸåƒåœ¾ï¼Œæœªé” ${winScore} åˆ†ï¼</p>
          <button onclick="startGame()">å†è©¦ä¸€æ¬¡</button>
        `;
      }
      gameArea.appendChild(result);
    }
  </script>
</body>
</html>
